<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<link rel="stylesheet" type="text/css" th:href="@{/css/new_style.css}">
<meta charset="UTF-8">
<body>

<header th:replace="fragments.html :: fragment-header"></header>

<div class="page-right">
<div class="page-section">

  <h2>주간 키워드</h2>

  <div class="mainpage-box mainpage-box-1">
    <p th:if="${topKeywordData != null}" th:text="${topKeywordData.startdate + ' ~ ' + topKeywordData.enddate}"></p>

    <ul class="keyword-list" id="keywordList">
      <!-- JavaScript로 동적으로 추가될 키워드 리스트 -->
    </ul>
    <script th:inline="javascript">
      // Thymeleaf에서 받은 JSON 데이터
      var topKeywordData = /*[[${topKeywordData}]]*/ null;

      if (topKeywordData) {
        // JavaScript로 동적으로 키워드 리스트 생성
        var keywordList = document.getElementById("keywordList");

        for (var key in topKeywordData) {
          if (key !== 'startdate' && key !== 'enddate') {
            var li = document.createElement("li");
            li.classList.add("keyword-item");

            var divKeyword = document.createElement("div");
            divKeyword.classList.add("keyword");
            divKeyword.textContent = key;

            var divNum = document.createElement("div");
            divNum.classList.add("num");
            divNum.textContent = topKeywordData[key] + "건";

            li.appendChild(divKeyword);
            li.appendChild(divNum);

            keywordList.appendChild(li);
          }
        }
      }
    </script>
  </div>

</div>

<div class="page-section">

  <h2>최신 뉴스</h2>

  <div class="mainpage-box">
    <!-- 최신 기사 목록 (5개) -->
    <table class="list-table" th:unless="${#lists.isEmpty(newsList)}" th:each="news, index : ${newsList}" th:if="${index.index} < 5">
      <tr>
        <td th:unless="${news.newsImageURL == ''}" rowspan="2" width="200">
          <img class="news-img" th:src="${news.newsImageURL}" alt="뉴스 이미지">
        </td>
        <td colspan="3" class="news-title">
          <a th:href="@{/news/{newsId}(newsId=${news.newsId})}" th:text="${news.newsTitle}">기사 제목</a>
        </td>
      </tr>
      <tr height="50" style="font-size: 14px">
        <td width="40">
                <span th:switch="${news.newsPublisher}">
                    <span th:case="0"><img class="news-icon" th:src="@{/img/nhk.png}"></span>
                    <span th:case="1"><img class="news-icon" th:src="@{/img/mainichi.png}"></span>
                    <span th:case="2"><img class="news-icon" th:src="@{/img/asahi.png}"></span>
                    <span th:case="3"><img class="news-icon" th:src="@{/img/sankei.png}"></span>
                </span>
        </td>
        <td>
                <span th:switch="${news.newsPublisher}">
                    <span th:case="0">NHK</span>
                    <span th:case="1">마이니치</span>
                    <span th:case="2">아사히</span>
                    <span th:case="3">산케이</span>
                </span>
        </td>
        <td th:text="${news.newsDate}" style="text-align:right; color: grey">기사 일자</td>
      </tr>
    </table>
    <a class="more-news-btn" th:href="@{/news}">최신 뉴스 더보기</a>
  </div>
</div>

<div class="page-section">

  <h2>원문 바로가기</h2>

  <div class="mainpage-box">
    <div class="go-to-site">
      <a><img src="/img/nhk.png"></a>
      <span>NHK</span>
    </div>

  </div>
</div>

</div>

</body>
</html>