<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<link rel="stylesheet" href="./style.css">
<meta charset="UTF-8">
<body>

<script>
    function translate() {
        // 입력창에서 텍스트 가져오기
        var inputText = document.getElementById('inputText').value;

        // Papago API로 번역 요청
        fetch('/translate', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ text: inputText, sourceLang: 'ko', targetLang: 'en' }),
        })
            .then(response => response.json())
            .then(data => {
                // 번역 결과를 입력 상자에 표시
                document.getElementById('inputText').value = data.translatedText;
            })
            .catch(error => console.error('Error:', error));
    }

    function search() {
        // 검색 폼 제출
        document.getElementById('searchForm').submit();
    }
</script>

<header>
    <h2>한국에 대한 중국과 일본의 시각을 한눈에!</h2>
</header>
    <!-- ID 추가 -->
<div class="headerSection">
    <div class="logo">LOGO</div>
    <div class="formBox">
        <form action="/news/search" method="GET">
            <input id="inputText" type="text" name="query" placeholder="뉴스 검색">
            <button type="button" onclick="translate()">번역</button>
            <button type="button" onclick="search()"><img class="search-button" src="search.png" /></button>
            <button type="button"><img class="ques-icon" id="ques0" src="ques.png" /></button>
        </form>
    </div>
    <div class="login"><a class="login" href="login.html">로그인</a>&nbsp;&nbsp;&nbsp;<a class="signin" href="signup.html">회원가입</a></div>
</div>
    <!-- 번역 및 검색 버튼 분리 -->
    <!--<button type="button" onclick="translate()">번역</button>-->



<script>
    function translate() {
        // 입력창에서 텍스트 가져오기
        var inputText = document.getElementById('inputText').value;

        // Papago API로 번역 요청
        fetch('/translate', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ text: inputText, sourceLang: 'ko', targetLang: 'en' }),
        })
            .then(response => response.json())
            .then(data => {
                // 번역 결과를 입력 상자에 표시
                document.getElementById('inputText').value = data.translatedText;
            })
            .catch(error => console.error('Error:', error));
    }

    function search() {
        // 검색 폼 제출
        document.getElementById('searchForm').submit();
    }
</script>

<form id="searchForm" action="/news/search" method="GET">
    <div class="search">
        <input name="keyword" type="hidden" placeholder="검색어를 입력해주세요">
    </div>
</form>

<nav>
    <ul class="nav">
        <li><a href="list.html">기사 보기</a>
            <div><span>국가</span>
                <input type="checkbox" class="menu-btn-chk" id="japan">
                <label class="menu-btn-label" for="japan">일본</label>
                <input type="checkbox" class="menu-btn-chk" id="china">
                <label class="menu-btn-label" for="china">중국</label>
                <br>
                <br>
                <span>주제</span>
                <input type="checkbox" class="menu-btn-chk" id="economics">
                <label class="menu-btn-label" for="economics">경제</label>
                <input type="checkbox" class="menu-btn-chk" id="politics">
                <label class="menu-btn-label" for="politics">정치</label>
                <input type="checkbox" class="menu-btn-chk" id="culture">
                <label class="menu-btn-label" for="culture">사회 문화</label>
                <input type="checkbox" class="menu-btn-chk" id="sports">
                <label class="menu-btn-label" for="sports">스포츠</label>
                <br>
                <br>
                <span>일본 언론사</span>
                <br>
                <br>
                <input type="checkbox" class="menu-btn-chk" id="nikkei">
                <label class="menu-btn-label" for="nikkei">닛케이</label>
                <input type="checkbox" class="menu-btn-chk" id="mainichi">
                <label class="menu-btn-label" for="mainichi">마이니치</label>
                <input type="checkbox" class="menu-btn-chk" id="sankei">
                <label class="menu-btn-label" for="sankei">산케이</label>
                <input type="checkbox" class="menu-btn-chk" id="asahi">
                <label class="menu-btn-label" for="asahi">아사히</label>
                <input type="checkbox" class="menu-btn-chk" id="yomiuri">
                <label class="menu-btn-label" for="yomiuri">요미우리</label>
                <input type="checkbox" class="menu-btn-chk" id="nhk">
                <label class="menu-btn-label" for="nhk">NHK</label>
                <br>
                <br>
                <span>중국 언론사</span>
                <br>
                <br>
                <input type="checkbox" class="menu-btn-chk" id="jp">
                <label class="menu-btn-label" for="jp">인민일보</label>
                <br>
                <button type="submit">조회</button>
            </div>
        </li>
        <li><a href="analysis.html">기사 분석</a></li>
    </ul>
</nav>

<h1>뉴스 목록</h1>

<div th:if="${newsList.isEmpty()}">
    <p>뉴스가 없습니다.</p>
</div>

<div th:each="news, iterStat : ${newsList}">
    <div>제목: <span th:text="${news.newsTitle}"></span></div>

    <div>
        <!-- newsId를 기반으로 링크 생성 -->
        <a th:href="@{'/news/' + ${news.newsId}}">뉴스 상세페이지로 이동</a>
    </div>
    <hr>
</div>
<div class="GoToOrgin">
    <p style="">원문 바로 가기</p>
    <img src="/ques.png" alt="q-mark" />
    <div id="jpmedia">
        <ul class="list">
            <li><a href="https://www.yomiuri.co.jp/" target="_blank" rel="noopener noreferrer"><img class="mediaicon" src="/yomiuri.png" alt="yomiuri" /><br>요미우리</a></li>
            <li><a href="https://www3.nhk.or.jp/news/" target="_blank" rel="noopener noreferrer"><img class="mediaicon" src="/nhk.png" alt="nhk" /><br>NHK</a></li>
            <li><a href="https://www.nikkei.com/" target="_blank" rel="noopener noreferrer"><img class="mediaicon" src="/nikkei.png" alt="nikkei" /><br>닛케이</a></li>
        </ul>
        <ul class="list">
            <li><a href="https://mainichi.jp/" target="_blank" rel="noopener noreferrer"><img class="mediaicon" src="/mainichi.png" alt="mainichi" /><br>마이니치</a></li>
            <li><a href="https://www.asahi.com/" target="_blank" rel="noopener noreferrer"><img class="mediaicon" src="/asahi.png" alt="asahi" /><br>아사히</a></li>
            <li><a href="https://www.sankei.com/" target="_blank" rel="noopener noreferrer"><img class="mediaicon" src="/sankei.png" alt="sankei" /><br>산케이</a></li>
        </ul>
    </div>
</div>
<footer id="footer">
    <div><h2>LOGO</h2>
        <span>팀 동아시아 제작</span>
        <span></span>
    </div>
</footer>
</body>
</html>



